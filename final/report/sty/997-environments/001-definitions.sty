% maths %

\addto\captionsfrench{
	\renewcommand\listtheoremname{Table des théorèmes}
}

\newcommand{\theoremname}{Theorem}
\newcommand{\definitionname}{Definition}
\newcommand{\lemmaname}{Lemma}
\newcommand{\problemname}{Problem}
\newcommand{\corollaryname}{Corollary}
\newcommand{\conjecturename}{Conjecture}

\addto\captionsfrench{
	\renewcommand{\theoremname}{Théorème}
	\renewcommand{\definitionname}{Définition}
	\renewcommand{\lemmaname}{Lemme}
	\newcommand{\problemname}{Problème}
	\renewcommand{\corollaryname}{Corollaire}
	\renewcommand{\conjecturename}{Conjecture}
}


% style

% http://tex.stackexchange.com/a/13687

\newtheoremstyle{slplain}% name
  {.5\baselineskip\@plus.2\baselineskip\@minus.2\baselineskip}% Space above
  {.5\baselineskip\@plus.2\baselineskip\@minus.2\baselineskip}% Space below
  {\slshape}% Body font
  {}%Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries}%  Thm head font
  {.}%       Punctuation after thm head
  { }%      Space after thm head: " " = normal interword space;
        %       \newline = linebreak
  {}%       Thm head spec


\theoremstyle{slplain}

\newtheorem{theorem}{\theoremname}[chapter]
\newtheorem{definition}[theorem]{\definitionname}
\newtheorem{lemma}[theorem]{\lemmaname}
\newtheorem{problem}[theorem]{\problemname}
\newtheorem{corollary}[theorem]{\corollaryname}
\newtheorem{conjecture}[theorem]{\conjecturename}

\newcommand\makethm[0]{
	\newpage\cleardoublepage\phantomsection
	\addcontentsline{toc}{chapter}{\listtheoremname}
	\listoftheorems[ignoreall,show={theorem,problem}]
}

%\renewcommand{\qedsymbol}{\rule{0.7em}{0.7em}}
%\renewcommand{\qedsymbol}{Q.E.D.}


\numberwithin{equation}{chapter}


% redefinition of \equation for convenience
\let\oldequation = \equation
\let\endoldequation = \endequation
\AtBeginDocument{\let\oldlabel = \label}% \AtBeginDocument because hyperref redefines \label
\newcommand{\mynewlabel}[1]{%
  \StrBehind{#1}{eq:}[\Str]% remove "eq:" from labels
  \equations{\Str}\oldlabel{#1}}

\renewenvironment{equation}{%
  \oldequation
  \let\label\mynewlabel
}{\endoldequation}

\newcommand{\listequationsname}{List of Equations}

\addto\captionsfrench{
  \renewcommand{\listequationsname}{Table des équations}
}


\newlistof{equations}{equ}{\listequationsname}
\newcommand{\equations}[1]{%
      \addcontentsline{equ}{equations}{\protect\numberline{\theequation}#1}}


\newcommand\makeequ[0]{
	\newpage\cleardoublepage\phantomsection
	\addcontentsline{toc}{chapter}{\listequationsname}
	\listofequations
}


\newenvironment{conditions}
  {\par\vspace{\abovedisplayskip}\noindent
   \tabularx{\columnwidth}{>{$}l<{$} @{${}={}$} >{\raggedright\arraybackslash}X}}
  {\endtabularx\par\vspace{\belowdisplayskip}}

% fix footnotes multiple places ref

\newcommand\footnoteref[1]{\protected@xdef\@thefnmark{\ref{#1}}\@footnotemark}
